{
  "id": "org.videolan.VLC.Plugin.fdkaac",
  "runtime": "org.videolan.VLC",
  "runtime-version": "stable",
  "branch": "3-18.08",
  "sdk": "org.freedesktop.Sdk//18.08",
  "build-extension": true,
  "separate-locales": false,
  "appstream-compose": false,
  "build-options": {
    "env": {
      "V": "1"
    }
  },
  "modules": [
    {
      "name": "fdkaac",
      "config-opts": [
        "--with-pic",
        "--disable-static",
        "--enable-shared",
        "--prefix=/app/share/vlc/extra/fdkaac"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/mstorsjo/fdk-aac/archive/v0.1.6.tar.gz",
          "sha256": "adbcd793e406e1b88b3c1c41382d49f8c27371485b823c0fdab69c9124fd2ce3"
        },
        {
          "type": "script",
          "commands": [
            "autoreconf -fiv"
          ],
          "dest-filename": "autogen.sh"
        }
      ]
    },
    {
      "name": "vlc",
      "rm-configure": true,
      "build-options": {
        "append-pkg-config-path": "/app/share/vlc/extra/fdkaac/lib/pkgconfig"
      },
      "config-opts": [
        "BUILDCC=/usr/bin/gcc -std=gnu99",
        "--disable-a52",
        "--disable-lua",
        "--enable-fdkaac",
        "--prefix=/var/tmp/install"
      ],
      "post-install": [
        "mkdir -p /app/share/vlc/extra/fdkaac/plugins",
        "mv /var/tmp/install/lib/vlc/plugins/codec/libfdkaac_plugin.so /app/share/vlc/extra/fdkaac/plugins",
        "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo org.videolan.VLC.Plugin.fdkaac.appdata.xml",
        "appstream-compose --basename=org.videolan.VLC.Plugin.fdkaac --prefix=${FLATPAK_DEST} --origin=flatpak org.videolan.VLC.Plugin.fdkaac"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.videolan.org/pub/videolan/vlc/3.0.5/vlc-3.0.5.tar.xz",
          "sha256": "f5c087dfebd4827052bf3b97996b3a05c79ae336dcb60a9e8d1a010f270072db"
        },
        {
          "type": "file",
          "path": "org.videolan.VLC.Plugin.fdkaac.appdata.xml"
        }
      ]
    }
  ]
}
