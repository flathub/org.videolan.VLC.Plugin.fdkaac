{
  "id": "org.videolan.VLC.Plugin.fdkaac",
  "runtime": "org.videolan.VLC",
  "runtime-version": "stable",
  "branch": "3-23.08",
  "sdk": "org.freedesktop.Sdk//23.08",
  "build-extension": true,
  "separate-locales": false,
  "appstream-compose": false,
  "build-options": {
    "env": {
      "V": "1"
    }
  },
  "modules": [
    {
      "name": "fdkaac",
      "config-opts": [
        "--with-pic",
        "--disable-static",
        "--enable-shared",
        "--prefix=/app/share/vlc/extra/fdkaac"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/mstorsjo/fdk-aac/archive/v2.0.2.tar.gz",
          "sha256": "7812b4f0cf66acda0d0fe4302545339517e702af7674dd04e5fe22a5ade16a90"
        },
        {
          "type": "script",
          "commands": [
            "autoreconf -fiv"
          ],
          "dest-filename": "autogen.sh"
        }
      ]
    },
    {
      "name": "vlc",
      "rm-configure": true,
      "build-options": {
        "append-pkg-config-path": "/app/share/vlc/extra/fdkaac/lib/pkgconfig"
      },
      "config-opts": [
        "BUILDCC=/usr/bin/gcc -std=gnu99",
        "--disable-a52",
        "--disable-lua",
        "--enable-fdkaac",
        "--prefix=/var/tmp/install"
      ],
      "post-install": [
        "mkdir -p /app/share/vlc/extra/fdkaac/plugins",
        "mv /var/tmp/install/lib/vlc/plugins/codec/libfdkaac_plugin.so /app/share/vlc/extra/fdkaac/plugins",
        "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo org.videolan.VLC.Plugin.fdkaac.appdata.xml",
        "appstream-compose --basename=org.videolan.VLC.Plugin.fdkaac --prefix=${FLATPAK_DEST} --origin=flatpak org.videolan.VLC.Plugin.fdkaac"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.videolan.org/pub/videolan/vlc/3.0.19/vlc-3.0.19.tar.xz",
          "sha256": "643e3294bafe922324663ca499515b7564f2794575fd7d2b7992d20896381745"
        },
        {
          "type": "file",
          "path": "org.videolan.VLC.Plugin.fdkaac.appdata.xml"
        },
        {
          "type": "patch",
          "path": "fdk-aac2.patch"
        }
      ]
    }
  ]
}
